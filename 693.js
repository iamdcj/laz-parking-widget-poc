"use strict";(self.webpackChunklaz_parking_widget_poc=self.webpackChunklaz_parking_widget_poc||[]).push([[693],{1693:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var r=n(5257),l=n(4155),a=n(6540),i=n(926),o=n(2100),c=n(9890),u=n(4073),s=n(1692),d=n(7234),E=n(5844);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,i,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const p=(0,a.memo)((function(e){var t=e.refetchEvents,n=void 0===t||t,l=e.marginBottom,f=void 0===l?0:l,p=(0,E.A)().retrieveEvents,v=m((0,a.useState)(!1),2),A=v[0],y=v[1],h=(0,i.U)(),b=h.state,g=b.events,T=b.hideEventDateTime,S=b.selectedLocation,I=b.selectedEvent,O=(b.isLoading,b.eventdriven),C=b.labels,P=b.selectedMode,x=h.dispatch,M="EVT"===P;(0,a.useEffect)((function(){M&&n&&S&&p(S)}),[S,M]);return(0,a.useEffect)((function(){y(!!(null==I?void 0:I.id))}),[null==I?void 0:I.id]),a.createElement(d.A,{sx:{mb:f,position:"relative",pb:!A&&(null==I?void 0:I.id)?5:0},size:"small",popupIcon:a.createElement(s.A,null),fullWidth:!0,disableClearable:!0,onOpen:function(){return y(!1)},onClose:function(){return(null==I?void 0:I.id)&&y(!0)},onChange:function(e,t){(null==t?void 0:t.id)?x({type:o.En.SELECTED_EVENT,payload:t}):x({type:o.En.SELECTED_EVENT,payload:null})},disabled:!M||g.length<=1,renderOption:function(e,t){return a.createElement("li",Object.assign({},e,{key:t.id}),a.createElement(r.A,{display:"flex",alignItems:"center",gap:1},a.createElement(r.A,null,a.createElement(u.A,{display:"block",fontSize:14},t.label),a.createElement(u.A,{fontSize:12},t.date&&!T&&t.date))))},options:g.map((function(e){var t=e.EventId,n=e.EventName,r=e.EventDate,l=n,a=new Date(r);return{id:t,label:l,date:new Intl.DateTimeFormat("en-US",{dateStyle:"short",timeStyle:"short"}).format(a)}})),renderInput:function(e){return a.createElement(a.Fragment,null,a.createElement(c.A,Object.assign({},e,{sx:{"& .MuiOutlinedInput-root.MuiInputBase-sizeSmall .MuiAutocomplete-input":{fontWeight:I?600:400},"& .MuiOutlinedInput-root.MuiInputBase-sizeSmall":{paddingBottom:A?5:1}},label:O?C.SHOWEVENT:C.CHOOSEEVENT})),A&&a.createElement(u.A,{sx:{display:"flex",alignItems:"center",ml:.5,color:"#586171"},position:"absolute",left:10,bottom:10},null==I?void 0:I.date))}})}));var v=n(6990),A=n(1749),y=n(2071),h=n(4433),b=n(779),g=n(655);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,i,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const I=function(e){var t=e.marginBottom,n=void 0===t?1:t,l=T(a.useState(null),2),c=l[0],u=l[1],s=(0,i.U)(),d=s.state,E=d.locations,m=d.selectedLocation,f=d.labels,p=(d.useMap,s.dispatch),S=function(){u(null)};(0,a.useEffect)((function(){S()}),[null==m?void 0:m.id]);var I=E.filter((function(e){return!e.isPlace})),O=Boolean(c);return a.createElement(b.A,{fullWidth:!0,size:"small",sx:{mb:n}},a.createElement(h.A,{id:"location-label"},f.SELECTLOCATION),a.createElement(y.A,{labelId:"location-label",id:"location",fullWidth:!0,onOpen:function(e){u(e.currentTarget)},onClose:function(){return u(null)},open:!!c,label:f.SELECTLOCATION,value:(null==m?void 0:m.id)||"",renderValue:function(){return null==m?void 0:m.label},size:"small",sx:{textAlign:"left"}}),a.createElement(A.Ay,{anchorEl:c,onClose:S,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:O},a.createElement(r.A,{width:288},a.createElement(r.A,{sx:{padding:1}},a.createElement(g.A,{height:184})),a.createElement(r.A,{component:"ul",sx:{maxHeight:200,overflow:"auto"}},I.map((function(e){var t=e.id,n=e.label;return a.createElement("li",null,a.createElement(v.A,{onClick:function(){return p({type:o.En.SELECTED_LOCATION,payload:{id:t,label:n}})},onMouseOver:function(){return p({type:o.En.FOCUSED_LOCATION,payload:{id:t,label:n}})}},n))}))))))};const O=function(){var e=(0,i.U)(),t=e.state,n=t.locations,r=t.selectedEvent,l=t.locationIds,c=t.events,u=e.dispatch,s=(0,E.A)(),d=s.retrieveEvents,m=s.retrieveLocations;return(0,a.useEffect)((function(){d(l)}),[]),(0,a.useEffect)((function(){r?m():u({type:o.En.SET_LOCATIONS,payload:null})}),[null==r?void 0:r.id]),a.createElement(a.Fragment,null,(null==c?void 0:c.length)>0&&a.createElement(p,{refetchEvents:!1,marginBottom:2}),(null==n?void 0:n.length)>0&&a.createElement(I,{marginBottom:2}))};var C=n(6620),P=n(8200),x=n(4675),M=n(6554),L=n(601),D=n(5737),R=n(4398),w=n(8105);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,i,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return F(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const N=function(e){var t=e.hideEnd,n=void 0!==t&&t,l=e.startLabel,c=e.endLabel,u=k((0,a.useState)(!1),2),s=u[0],d=u[1],E=(0,i.U)(),m=E.state,f=m.times,p=f.start,v=f.end,A=m.labels,y=m.selectedMode,h=E.dispatch,b="TMD"!==y,g={textField:{size:"small"},openPickerButton:{color:"primary"}};return a.createElement(D.$,{dateAdapter:L.R},a.createElement(r.A,{width:"100%",display:"grid",gridTemplateColumns:"1fr"},a.createElement(R.K,{slotProps:g,label:l||A.ARRIVE,views:["year","day","hours","minutes"],disablePast:!0,skipDisabled:!0,formatDensity:"dense",timeSteps:{hours:1,minutes:30,seconds:0},value:p,disabled:b,viewRenderers:{hours:w.$W,minutes:null,seconds:null},onChange:function(e){return h({type:o.En.SET_START_TIME,payload:e})},onClose:function(){p&&d(!0)},sx:{width:"100%",mb:1}}),!n&&a.createElement(R.K,{slotProps:g,disablePast:!0,label:c||A.DEPART,views:["year","day","hours","minutes"],timeSteps:{hours:1,minutes:30,seconds:0},minDateTime:(null==p?void 0:p.add(30,"minutes"))||null,skipDisabled:!0,value:v,open:s,disabled:b||!p,onClose:function(){d(!1)},onOpen:function(){return d(!0)},viewRenderers:{hours:w.$W,minutes:null,seconds:null},onChange:function(e){h({type:o.En.SET_END_TIME,payload:e})},sx:{width:"100%",mt:1}})))};const U=function(e){var t,n=e.IsFEP,l=void 0!==n&&n,c=e.IsFAP,u=void 0!==c&&c,s=e.IsMPS,d=void 0!==s&&s,m=e.IsMUP,f=void 0!==m&&m,p=(0,i.U)(),v=p.state,A=v.rate,g=v.selectedMode,T=v.selectedLocation,S=v.seasonTickets,I=v.labels,O=p.dispatch,C=(0,E.A)().retrieveSeasonTickets,P=["MUP","FAP","FEX","FEP"].includes(g),x=S&&S.length>0;return(0,a.useEffect)((function(){P&&T&&C({IsFEP:l,IsFAP:u,IsMPS:d,IsMUP:f})}),[g,T]),function(e){e[e.FEP=I.CHOOSEFIXEDEXPIRY||I.CHOOSEFIXEDEXPIRYTICKET]="FEP",e[e.FAP=I.CHOOSEFIXEDACCESS||I.CHOOSEFIXEDACCESSTICKET]="FAP"}(t||(t={})),a.createElement(r.A,{width:"100%"},a.createElement(b.A,{fullWidth:!0,size:"small"},a.createElement(h.A,{id:"season-passes-label"},t[g]||I.CHOOSEPASSTYPE),a.createElement(y.A,{labelId:"season-passes",id:"season-passes",fullWidth:!0,label:t[g]||I.CHOOSEPASSTYPE,value:A||"",disabled:!x||!P||1===S.length,onChange:function(e){return O({type:o.En.SET_RATE,payload:e.target.value})}},x&&S.map((function(e){var t=e.Id,n=e.RateName,r=e.RateDetailName,l=e.RateId,i=t||l;return a.createElement(M.A,{key:i,value:i},n||r)})))),u&&a.createElement(r.A,{sx:{mt:3}},a.createElement(N,{hideEnd:!0,startLabel:I.ARRIVALDATE,endLabel:I.DEPARTUREDATE})))};const _=function(){var e=(0,i.U)(),t=e.state,n=t.timeIncrements,r=t.selectedDuration,l=t.selectedLocation,c=t.labels,u=t.selectedMode,s=e.dispatch,d="PST"!==u,m=(0,E.A)().retrieveTimeIncrements;(0,a.useEffect)((function(){m()}),[l]);var f=n&&n.length>0;return a.createElement(b.A,{fullWidth:!0,size:"small"},a.createElement(h.A,{id:"duration-label"},c.CHOOSEPRESET),a.createElement(y.A,{disabled:d||!f,labelId:"duration",id:"duration",fullWidth:!0,label:c.CHOOSEPRESET,value:r||"",onChange:function(e){return s({type:o.En.SET_DURATION,payload:e.target.value})}},f&&n.map((function(e){var t=e.Duration,n=e.Display;return a.createElement(M.A,{key:t,value:t},"00M"===t?c.PARKRIGHTNOW:n)}))))};var j=n(3769),V={TMD:a.createElement(N,null),EVT:a.createElement(p,null),PST:a.createElement(_,null),FEP:a.createElement(U,{IsFEP:!0}),FEX:a.createElement(U,{IsFEP:!0}),FAP:a.createElement(U,{IsFAP:!0}),MUP:a.createElement(U,{IsMUP:!0})};const W=function(){var e,t=(0,x.A)(),n=(0,i.U)(),l=n.state,c=l.modes,s=l.selectedMode,d=void 0===s?"":s,E=l.labels,m=n.dispatch;return function(e){e[e.TMD=E.TIMEDTITLE]="TMD",e[e.EVT=E.EVENTTITLE]="EVT",e[e.PST=E.PRESETTITLE]="PST",e[e.FEP=E.PASSESTITLE]="FEP",e[e.FEX=E.PASSESTITLE]="FEX",e[e.FAP=E.PASSESTITLE]="FAP",e[e.MUP=E.PASSESTITLE]="MUP"}(e||(e={})),a.createElement(P.A,{sx:{display:"grid",rowGap:1,width:"100%"},name:"modes",value:d,onChange:function(e,t){m({type:o.En.SELECTED_MODE,payload:t})}},c&&c.length>0&&c.map((function(n,l){return a.createElement(a.Fragment,null,a.createElement(r.A,{width:"100%",px:1,py:2,borderRadius:2,sx:{backgroundColor:n===d?(0,j.X4)(t.palette.primary.main,.0619999):"none"}},a.createElement(r.A,{width:"100%",display:"flex",mb:2,onClick:function(){m({type:o.En.SELECTED_MODE,payload:n})},sx:{cursor:"pointer"}},a.createElement(C.A,{key:n,id:n,value:n,sx:{py:0,color:t.palette.primary.main,"&.Mui-checked":{color:t.palette.primary.main}}}),a.createElement(u.A,{fontWeight:600},e[n])),V[n]),l+1!==c.length&&a.createElement(u.A,{display:"block",textAlign:"center",position:"relative",sx:{width:"100%","&:after":{content:"''",width:"100%",height:"1px",background:"#D7DAE0",display:"block",position:"absolute",left:0,top:"50%",transform:"translateY(-50%)"}}},a.createElement(r.A,{component:"span",sx:{background:"#fff",display:"inline-block",zIndex:2,position:"relative"}},E.OR||E.LABELOR)))})))};const z=function(){var e=(0,i.U)(),t=e.state,n=t.locations,l=t.selectedLocation,c=t.modes,u=t.modesOverride,s=t.selectedMode,d=e.dispatch,m=(0,E.A)().retrieveLocations;return(0,a.useEffect)((function(){m()}),[]),(0,a.useEffect)((function(){l?u&&d({type:o.En.SET_MODES,payload:u}):d({type:o.En.RESET_EVENTS})}),[l,m]),console.log(s),a.createElement(r.A,{display:"grid",rowGap:2,mb:2},(null==n?void 0:n.length)>0&&a.createElement(I,null),c&&1===c.length?V[c[0]]:l&&a.createElement(W,null))};var H=n(7808),B=n(4164);const X=function(){var e,t=(0,i.U)().state,n=t.selectedEvent,r=t.selectedLocation,l=t.selectedDuration,o=t.widgetKey,c=t.modes,u=t.times,s=t.agentId,d=t.salesChannelKey,E=t.rate,m=t.labels,f=t.selectedMode,p=t.canPurchase;return function(e){e[e.EVT=m.CONTINUE]="EVT"}(e||(e={})),a.createElement(v.A,{href:(0,B.MC)({duration:l,l:null==r?void 0:r.id,evid:null==n?void 0:n.id,wk:o,mode:c&&1===c.length?c[0]:f,times:u,aid:s,sc:d,rid:E}),variant:"contained",color:"primary",target:"_blank",rel:"noreferer",fullWidth:!0,disabled:!p},e[f]||m.GETRATE)};var K=n(3574),G=n(5001),Y=n(4405),$=n(4654);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,l,a,i,o=[],c=!0,u=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(o.push(r.value),o.length!==t);c=!0);}catch(e){u=!0,l=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(u)throw l}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}const J=function(){var e=(0,x.A)(),t=(0,i.U)().state,n=t.labels,r=t.isHeaderEnabled,l=Z(a.useState(null),2),o=l[0],c=l[1],u=Boolean(o),s=function(){c(null)},d=[{link:n.MANAGEMYBOOKING_URL,label:n.MYACCOUNT||n.MANAGEMYBOOKING},{link:n.EDITRESERVATION_URL,label:n.EDITRESERVATION},{link:n.CANCELRESERVATION_URL,label:n.CANCELRESERVATION}];return a.createElement(a.Fragment,null,a.createElement(v.A,{id:"basic-button","aria-controls":u?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:function(e){c(e.currentTarget)},sx:{color:"#fff",position:"absolute",right:0,minWidth:"auto"}},a.createElement($.A,{sx:{color:r?"#fff":e.palette.primary.main}})),a.createElement(Y.A,{id:"basic-menu",anchorEl:o,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:u,onClose:s,MenuListProps:{"aria-labelledby":"basic-button"}},d.map((function(e){var t=e.link,n=e.label;return a.createElement(M.A,{onClick:s,sx:{pr:0}},a.createElement(G.A,{href:t,target:"_blank",onClick:s,sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",textDecoration:"none"}},n," ",a.createElement(K.A,null)))}))))};const Q=function(){var e=(0,i.U)().state,t=e.headerText,n=e.logo,l=e.labels,o=e.isHeaderEnabled,c=(0,x.A)();return a.createElement(r.A,{id:"LAZ_WidgetHeader",sx:{backgroundColor:o?"primary.main":"none",borderRadius:"4px 4px 0 0",position:"relative"}},a.createElement(r.A,{className:"LAZ_WidgetHeader_Content",height:36,sx:{display:"flex",justifyContent:"center",alignItems:"center"}},a.createElement(J,null),o&&a.createElement(r.A,null,n?a.createElement("img",{src:n,alt:"Client Logo",style:{height:20,width:"auto"}}):a.createElement(u.A,{component:"p",fontWeight:600,color:c.palette.primary.contrastText},t||l.RESERVEPARKING))))};const ee=function(){(0,x.A)();var e=(0,E.A)().retrieveLanguages,t=(0,i.U)().state,n=t.eventDriven,o=t.isInitializing;return(0,a.useEffect)((function(){e()}),[]),o?null:a.createElement(l.A,{id:"WidgetFaceDiv",elevation:2,sx:{position:"relative",width:"100%",maxWidth:300}},a.createElement(H.A,null),a.createElement(Q,null),a.createElement(r.A,{position:"relative",p:1,pt:3,zIndex:1},n?a.createElement(O,null):a.createElement(z,null),a.createElement(X,null)))}}}]);